<!DOCTYPE html>
<html>
<head><title>Wiktionary | Pealim | Dict.com loader</title></head>
<body>
<div id="demo"></div>
<script>

function loadConj(wrd) { 
  const xhttp = new XMLHttpRequest(); 
  xhttp.onload = function() {

    //alert(this.responseText);
    document.getElementById("demo").innerHTML = this.responseText.replace(/\<\a /g, "<a target='_blank' ");
  };

  xhttp.open("GET", "https://script.google.com/macros/s/AKfycbz5br4wnfSGtucWKwGQq1Tb07eshJez6uVaFatn4xJAc_rcrcA/exec?a=proxy&q=https://pealim.com/search/?q="+wrd);
  xhttp.send();
}


function loadDef(wrd) { 
  const xhttp = new XMLHttpRequest(); 
  xhttp.onload = function() {

    var json = JSON.parse(this.responseText);
    //alert(this.responseText);
    
    var txt = '';
    
    for (var i=0; i<json.he.length; i++) {
        txt += '<i>' + json.he[i].partOfSpeech + '</i><br/>';
        for (var j=0; j<json.he[i].definitions.length; j++) {
            txt += json.he[i].definitions[j].definition.replace(/\<\a /g, '<b ').replace(/\<\/\a\>/g, '</b>') + '<br/>';
        }
        txt += '<br/>';
    }
    document.getElementById("demo").innerHTML = txt;
    
  };
  xhttp.open("GET", "https://en.wiktionary.org/api/rest_v1/page/definition/"+wrd);
  xhttp.send();
}

var wrd = location.href.split('?q=')[1].split('&a=')[0];
var act = location.href.split('&a=')[1];
if (act == 'def') {
    loadDef(wrd);
} else if (act == 'conj') {
    loadConj(wrd);
}
</script>
</body>
</html>